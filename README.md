# Kivy-Project-BAISD-2-68

## AI Stock Counter App

แอปพลิเคชันจัดการสต็อกสินค้าอัจฉริยะที่ใช้เทคโนโลยี Computer Vision ในการตรวจนับวัตถุผ่านกล้องแบบ Real-time พร้อมระบบจัดการฐานข้อมูลในตัวและการวิเคราะห์ข้อมูลเชิงสถิติด้วยกราฟ

## ⚠️ ปัญหาในอุตสาหกรรมและที่มาของโครงการ (Pain Points)

ในอุตสาหกรรมค้าปลีก คลังสินค้า และการจัดการการผลิต ปัญหาที่มักเกิดขึ้นซ้ำๆ และสร้างความเสียหายต่อมูลค่าธุรกิจมีดังนี้ 

1. ความล่าช้าจากการทำงานแบบดั้งเดิม (Process Inefficiency) :

การนับสต็อกด้วยสายตาและจดบันทึกลงกระดาษเป็นกระบวนการที่ใช้เวลานานมาก ทำให้ต้องหยุดการขายหรือหยุดการทำงานส่วนอื่นเพื่อเช็กสต็อก ส่งผลให้เสียโอกาสทางธุรกิจ

2. ข้อผิดพลาดจากปัจจัยมนุษย์ (Human Error & Fatigue) :

เมื่อต้องนับวัตถุจำนวนมากในคลังสินค้าที่แออัด พนักงานมักเกิดอาการเหนื่อยล้าจนนับผิด หรืออ่านลายมือบันทึกของตัวเองผิดพลาด ทำให้ข้อมูลในระบบไม่ตรงกับสินค้าจริง (Inventory Inaccuracy)

3. ต้นทุนแฝงจากการสูญหายและสินค้าล้นคลัง (Hidden Costs) :

หากไม่มีระบบตรวจสอบที่แม่นยำและเรียลไทม์ ธุรกิจอาจประสบปัญหา "สินค้าขาด" (Out of Stock) จนเสียลูกค้า หรือ "สินค้าค้างสต็อก" (Dead Stock) จนต้นทุนจมและสินค้าหมดอายุ

4. การขาดข้อมูลเชิงวิเคราะห์ (Lack of Data Insights) :

ข้อมูลที่ถูกจดบันทึกลงกระดาษยากต่อการนำมาวิเคราะห์แนวโน้มการขึ้นลงของสินค้า ทำให้ผู้ประกอบการตัดสินใจสั่งซื้อสินค้าในอนาคตได้ยาก

## ภาพรวมของโปรแกรม (Program Overview)
แอปพลิเคชันนี้ถูกออกแบบมาเพื่อลดข้อผิดพลาดและระยะเวลาในการเช็กสต็อกสินค้า โดยมีหัวใจหลักคือการทำงานร่วมกันระหว่าง Kivy Framework (สำหรับส่วนติดต่อผู้ใช้) และ YOLOv8 (สำหรับระบบ AI ตรวจนับวัตถุ) โดยข้อมูลทั้งหมดจะถูกจัดเก็บไว้ในรูปแบบไฟล์ JSON ภายในเครื่องเพื่อให้สามารถเข้าถึงและจัดการข้อมูลได้อย่างรวดเร็ว

## การใช้งานและฟังก์ชันในแต่ละหน้า (Features & Functions)

1. หน้าจอตรวจจับ (Camera Screen)
   
เป็นหน้าจอหลักเมื่อเปิดแอปพลิเคชันขึ้นมา

AI Scanning : ใช้กล้องถ่ายภาพสินค้าเพื่อส่งให้ AI ประมวลผลและนับจำนวนวัตถุโดยอัตโนมัติ

Review AI Detection : หลังการตรวจจับ จะมีหน้าต่าง Popup แสดงรายการที่พบพร้อมค่าความเชื่อมั่น (%)

Manual Override (+/-) : ผู้ใช้สามารถกดปุ่มบวกหรือลบเพื่อแก้ไขจำนวนสินค้าให้ถูกต้องก่อนกดบันทึกจริง

Camera Switch : รองรับการสลับกล้องหน้าและกล้องหลัง (สำหรับใช้งานบน Mobile)

2. หน้าจอประวัติสต็อก (Stock List Screen)
หน้าจอสำหรับจัดการรายการข้อมูลที่เคยบันทึกไว้

Search Bar : ค้นหาชื่อสินค้าได้แบบ Real-time

Date Filter : กรองข้อมูลตามวันที่ในรูปแบบ YYYY-MM-DD เพื่อดูรายการย้อนหลังเฉพาะช่วงเวลา

Edit/Delete : สามารถกดที่รายการเพื่อแก้ไข (Edit) ชื่อและจำนวน หรือลบ (Delete) ข้อมูลที่ไม่ต้องการออกได้

Export CSV : ปุ่มส่งออกข้อมูลประวัติทั้งหมดเป็นไฟล์ CSV สำหรับใช้งานใน Excel

3. หน้าจอวิเคราะห์สถิติ (Analytics Screen)
หน้าจอสำหรับแสดงข้อมูลในรูปแบบภาพ (Data Visualization)

Product Daily Trends : กราฟเส้นแสดงสถิติยอดสต็อกรวมในแต่ละวันแยกตามประเภทสินค้า

Horizontal Product Selector : แถบเมนูสำหรับเลือกดูสินค้าที่ต้องการวิเคราะห์ข้อมูลทีละรายการ

Interactive Chart : กราฟแสดงตัวเลขจำนวนกำกับเหนือจุดข้อมูลทุกจุดเพื่อความชัดเจน

## คำอธิบายโครงสร้างโค้ด (Code Explanation)

1. StockData (The Model/Controller) :

- ทำหน้าที่จัดการวงจรชีวิตของข้อมูล (CRUD operations)

- ใช้การประมวลผลข้อมูลดิบจาก JSON ให้กลายเป็นโครงสร้าง Nested Dictionary เพื่อให้หน้า Analytics สามารถดึงข้อมูลไปแสดงผลเป็นกราฟรายวันได้อย่างรวดเร็วโดยไม่ต้องวนลูปค้นหาข้อมูลใหม่ทุกครั้ง

2. CameraScreen (AI Integration) :

- Texture Mapping: มีการดึงข้อมูล texture จากวิดเจ็ตกล้องมาแปลงเป็นไฟล์รูปภาพชั่วคราว (temp.png) เพื่อส่งต่อให้โมเดล YOLO ประมวลผล

- Review Logic: ใช้ระบบ temp_res ในการพักข้อมูลที่ AI ตรวจจับได้ เพื่อให้ผู้ใช้สามารถตรวจสอบและแก้ไข (Manual Override) ก่อนจะสั่งบันทึกถาวรลงฐานข้อมูล

3. StockListScreen (History & Filters) :

- Bi-directional Filtering: ใช้ Logic การตรวจสอบเงื่อนไขคู่ขนานระหว่าง product_name และ timestamp ทำให้ผู้ใช้สามารถกรองข้อมูลได้ละเอียด เช่น ค้นหา "ขวดน้ำ" ในวันที่ "2026-02-13" เท่านั้น

4. AnalyticsScreen (Canvas Visualization) :

- Dynamic Coordinate Calculation: เนื่องจากหน้าจออุปกรณ์มีขนาดต่างกัน โค้ดส่วนนี้จึงใช้การคำนวณพิกัดแบบสัดส่วน (Ratio-based) แทนการระบุพิกัดคงที่ เพื่อให้เส้นกราฟและจุดข้อมูลอยู่ในตำแหน่งที่ถูกต้องเสมอ

- Widget Management: มีการติดป้ายกำกับ (Flag) เช่น is_v หรือ is_y ให้กับ Label เพื่อให้ระบบสามารถระบุและลบเฉพาะ Widget ตัวเลขเก่าออกได้เมื่อมีการเปลี่ยนหน้าหรือขยายหน้าจอ ช่วยป้องกันปัญหาตัวเลขแสดงผลซ้อนกัน

## ผู้พัฒนา 
- 6810110179 นายน่านน้ำ ไชยชาญยุทธ์
- 6810110709 นายวฤนาท ระเบียบพร 
- 6810110717 นายศิวกร แสงแก้ว
  
อัปเดตล่าสุด : 15 กุมภาพันธ์ 2569
